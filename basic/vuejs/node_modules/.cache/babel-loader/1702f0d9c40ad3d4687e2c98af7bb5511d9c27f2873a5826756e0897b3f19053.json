{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import ModalComponent from \"@/components/ModalComponent.vue\";\n\nimport cafesComponent from \"@/components/CafesComponent.vue\";\nimport CafesComponent from \"@/components/CafesComponent.vue\";\nexport default {\n  name: \"CafeComponent\",\n  data() {\n    return {\n      show: false,\n      success_show: false,\n      f: '',\n      feedbacks: []\n    };\n  },\n  props: {\n    \"cafe\": {\n      required: true,\n      type: Object\n    }\n    /*    \"feedback\": {\n          required: true,\n          type: Object\n        }*/\n  },\n\n  // components: {ModalComponent},\n  mounted() {\n    function moveCaretToStart(inputObject) {\n      if (inputObject.textarea) {\n        let r = inputObject.textarea();\n        r.collapse(true);\n        r.select();\n      }\n    }\n  },\n  methods: {\n    toggle: async function () {\n      if (!this.show) this.feedbacks = (await CafesComponent.methods.getFeedbacks(this.cafe.id)).reduce((v, a) => v.text);\n      this.show = !this.show;\n      return this.show;\n    },\n    saveFeedback: function () {\n      this.feedbacks.push(this.f);\n      this.f = '';\n      this.success_show = true;\n      setTimeout(() => this.success_show = false, 5000);\n    }\n    // getFeedbacks: function () {\n    //   if (!this.feedbacks.length) this.feedbacks = ['Not bad', 'Good!']\n    // }\n  }\n};","map":{"version":3,"names":["cafesComponent","CafesComponent","name","data","show","success_show","f","feedbacks","props","required","type","Object","mounted","moveCaretToStart","inputObject","textarea","r","collapse","select","methods","toggle","getFeedbacks","cafe","id","reduce","v","a","text","saveFeedback","push","setTimeout"],"sources":["/home/oem/PhpstormProjects/Yii2Vue/basic/vuejs/src/components/CafeComponent.vue"],"sourcesContent":["<script>\n\n// import ModalComponent from \"@/components/ModalComponent.vue\";\n\n\nimport cafesComponent from \"@/components/CafesComponent.vue\";\nimport CafesComponent from \"@/components/CafesComponent.vue\";\n\nexport default {\n  name: \"CafeComponent\",\n\n  data() {\n    return {\n      show: false,\n      success_show: false,\n      f: '',\n      feedbacks: []\n\n    }\n  },\n\n  props: {\n    \"cafe\": {\n      required: true,\n      type: Object\n    },\n    /*    \"feedback\": {\n          required: true,\n          type: Object\n        }*/\n  },\n  // components: {ModalComponent},\n  mounted() {\n    function moveCaretToStart(inputObject) {\n      if (inputObject.textarea) {\n        let r = inputObject.textarea();\n        r.collapse(true);\n        r.select();\n      }\n    }\n  },\n  methods: {\n    toggle: async function () {\n      if (!this.show)\n         this.feedbacks =\n            (await CafesComponent.methods.getFeedbacks(this.cafe.id)).reduce((v,a)=>v.text)\n\n      this.show = !this.show\n      return this.show\n    },\n    saveFeedback: function () {\n      this.feedbacks.push(this.f)\n      this.f = ''\n      this.success_show = true\n      setTimeout(() => this.success_show = false, 5000)\n    },\n    // getFeedbacks: function () {\n    //   if (!this.feedbacks.length) this.feedbacks = ['Not bad', 'Good!']\n    // }\n  }\n}\n\n</script>\n\n<template>\n\n  <div class=\"tc-cafe\" @click.prevent=\"toggle\" v-show=\"cafe.show\">\n    <div class=\"tc-cafe-title\">\n      {{ cafe.name }}\n    </div>\n    <div class=\"tc-cafe-body\">\n      Отзывов: {{ cafe.feedbacksCount }}\n    </div>\n    <img class=\"tc-cafe-image\" v-bind:src=\"cafe.photo\" v-show=\"true\" alt=\"\"/>\n    <div class=\"tc-cafe-modal\" v-show=\"show&&cafe.show\">\n      <div>\n        <div v-show=\"cafe.address\">Адрес: {{ cafe.address }}</div>\n        <div v-show=\"cafe.landmark\">Ориентиры: {{ cafe.landmark }}</div>\n        <div v-show=\"cafe.cuisine\">Кухня: {{ cafe.cuisine }}</div>\n        <div v-show=\"cafe.distance\">Расстояние: {{ cafe.distance }}м.</div>\n        <div v-show=\"cafe.time\">Время в пути: {{ cafe.time }} мин.</div>\n        <!--        <div v-show=\"cafe.hasOwnProperty('business_lunch')\"> Бизнес-ланч: {{ business_lunch ? 'Да' : 'Нет' }}</div>-->\n        <div v-show=\"cafe.price\">Ср.чек: {{ cafe.price }} руб.</div>\n        <p/>\n        <div class=\"tc-feedbacks\">\n\n          <li v-for=\"n in feedbacks\" v-bind:key=\"n\">{{ n }}</li>\n\n        </div>\n        <div>\n          <p></p>\n          Оставить отзыв\n        </div>\n        <div class=\"tc-cafe-input\">\n              <textarea v-model=\"f\" @click.prevent=\"toggle\">\n                </textarea>\n          <div class=\"success-message\" v-if=\"success_show\">\n            Спасибо! Ваш отзыв сохранён\n          </div>\n          <div/>\n          <button class=\"tc-cafe-btn\" type=submit @click=\"saveFeedback\" @click.prevent=\"toggle\">Сохранить</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <hr class=\"hr\">\n\n\n</template>\n\n<style lang=\"scss\" scoped>\n\n.tc-cafe {\n  font-size: 24px;\n\n  background-color: darkseagreen;\n  border-radius: 8px;\n  width: percentage(0.8);\n  text-align: center;\n\n  .tc-cafe-image {\n    width: percentage(0.5);\n    margin-bottom: 10px;\n  }\n}\n\n.tc-cafe-modal {\n  text-align: left;\n  margin-left: 25%;\n}\n\n.hr {\n  border: 0;\n}\n\n.tc-cafe-btn {\n  font-size: 24px;\n  margin-bottom: 10px;\n}\n\n.tc-cafe-input {\n  font-size: 24px\n\n}\n\n.success-message {\n  font-size: 34px;\n\n  opacity: 0.7;\n}\n\n/*\n.tc-cafe {\n  background-color: #f0c806;\n  border-radius: 8px;\n\n  //width: 280px;\n  width: percentage(0.8);\n  //margin: 0 10px 20px;\n  margin: 10px 10% 10px 10%;\n  box-shadow: 1px 3px 5px rgba(0, 0, 0, 0.2);\n  transition: all 0.5s;\n  cursor: pointer;\n  //font-family: 'Caveat', cursive;\n\n  .tc-cafe-header {\n\n    //padding: 10px 16px 0;\n\n  }\n\n  .tc-cafe-title,\n  .tc-cafe-body {\n    margin: 5px 10% 5px 10%;\n    outline: 0;\n  }\n\n  .tc-cafe-title {\n    font-size: 24px;\n    padding: 10px 16px;\n    font-weight: bold;\n  }\n\n  .tc-cafe-input {\n    width: 100%;\n    max-width: 500px;\n    outline: none;\n    border: 1px solid var(--aurora-2);\n    border-radius: 0.25rem;\n    min-width: 12rem;\n    font-size: 24px;\n    font-weight: bold;\n    color: var(--aurora-2);\n    opacity: 80%;\n  }\n\n  .tc-cafe-body {\n    font-size: 20px;\n    padding: 10px 16px 16px;\n  }\n\n  &:hover {\n    box-shadow: 2px 4px 10px rgba(0, 0, 0, 0.3);\n  }\n}\n.tc-cafe-image {\n  //margin: 5px 25% 5px 25%;\n  width: 400px;\n}\n\n*/\n\n</style>"],"mappings":";AAEA;;AAGA,OAAOA,cAAa,MAAO,iCAAiC;AAC5D,OAAOC,cAAa,MAAO,iCAAiC;AAE5D,eAAe;EACbC,IAAI,EAAE,eAAe;EAErBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,KAAK;MACXC,YAAY,EAAE,KAAK;MACnBC,CAAC,EAAE,EAAE;MACLC,SAAS,EAAE;IAEb;EACF,CAAC;EAEDC,KAAK,EAAE;IACL,MAAM,EAAE;MACNC,QAAQ,EAAE,IAAI;MACdC,IAAI,EAAEC;IACR;IACA;;;;EAIF,CAAC;;EACD;EACAC,OAAOA,CAAA,EAAG;IACR,SAASC,gBAAgBA,CAACC,WAAW,EAAE;MACrC,IAAIA,WAAW,CAACC,QAAQ,EAAE;QACxB,IAAIC,CAAA,GAAIF,WAAW,CAACC,QAAQ,CAAC,CAAC;QAC9BC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC;QAChBD,CAAC,CAACE,MAAM,CAAC,CAAC;MACZ;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,MAAM,EAAE,eAAAA,CAAA,EAAkB;MACxB,IAAI,CAAC,IAAI,CAAChB,IAAI,EACX,IAAI,CAACG,SAAQ,GACV,CAAC,MAAMN,cAAc,CAACkB,OAAO,CAACE,YAAY,CAAC,IAAI,CAACC,IAAI,CAACC,EAAE,CAAC,EAAEC,MAAM,CAAC,CAACC,CAAC,EAACC,CAAC,KAAGD,CAAC,CAACE,IAAI;MAEpF,IAAI,CAACvB,IAAG,GAAI,CAAC,IAAI,CAACA,IAAG;MACrB,OAAO,IAAI,CAACA,IAAG;IACjB,CAAC;IACDwB,YAAY,EAAE,SAAAA,CAAA,EAAY;MACxB,IAAI,CAACrB,SAAS,CAACsB,IAAI,CAAC,IAAI,CAACvB,CAAC;MAC1B,IAAI,CAACA,CAAA,GAAI,EAAC;MACV,IAAI,CAACD,YAAW,GAAI,IAAG;MACvByB,UAAU,CAAC,MAAM,IAAI,CAACzB,YAAW,GAAI,KAAK,EAAE,IAAI;IAClD;IACA;IACA;IACA;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}