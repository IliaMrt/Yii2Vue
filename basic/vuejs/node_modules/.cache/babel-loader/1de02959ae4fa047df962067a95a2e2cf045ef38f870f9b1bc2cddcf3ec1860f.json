{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CafesComponent from \"@/components/CafesComponent.vue\";\nexport default {\n  name: \"CafeComponent\",\n  data() {\n    return {\n      show: false,\n      success_show: false,\n      f: '',\n      feedbacks: [],\n      feedbackCount: 0\n    };\n  },\n  props: {\n    \"cafe\": {\n      required: true,\n      type: Object\n    }\n  },\n  mounted() {\n    this.feedbackCount = this.cafe.feedbacksCount;\n    function moveCaretToStart(inputObject) {\n      if (inputObject.textarea) {\n        let r = inputObject.textarea();\n        r.collapse(true);\n        r.select();\n      }\n    }\n  },\n  methods: {\n    toggle: async function () {\n      if (!this.show) this.feedbacks = await CafesComponent.methods.getFeedbacks(this.cafe.id);\n      this.show = !this.show;\n      return this.show;\n    },\n    saveFeedback: async function () {\n      this.feedbacks.push({\n        text: this.f\n      });\n      this.feedbackCount++;\n      this.success_show = true;\n      await CafesComponent.methods.saveFeedback({\n        text: this.f,\n        id_cafe: this.cafe.id\n      });\n      this.f = '';\n      setTimeout(() => this.success_show = false, 5000);\n    }\n  }\n};","map":{"version":3,"names":["CafesComponent","name","data","show","success_show","f","feedbacks","feedbackCount","props","required","type","Object","mounted","cafe","feedbacksCount","moveCaretToStart","inputObject","textarea","r","collapse","select","methods","toggle","getFeedbacks","id","saveFeedback","push","text","id_cafe","setTimeout"],"sources":["/home/oem/PhpstormProjects/Yii2Vue/basic/vuejs/src/components/CafeComponent.vue"],"sourcesContent":["<script>\n\nimport CafesComponent from \"@/components/CafesComponent.vue\";\n\nexport default {\n  name: \"CafeComponent\",\n\n  data() {\n    return {\n      show: false,\n      success_show: false,\n      f: '',\n      feedbacks: [],\n      feedbackCount: 0,\n\n    }\n  },\n\n  props: {\n    \"cafe\": {\n      required: true,\n      type: Object\n    },\n  },\n\n  mounted() {\n    this.feedbackCount = this.cafe.feedbacksCount\n\n    function moveCaretToStart(inputObject) {\n      if (inputObject.textarea) {\n        let r = inputObject.textarea();\n        r.collapse(true);\n        r.select();\n      }\n    }\n  },\n\n  methods: {\n\n    toggle: async function () {\n      if (!this.show)\n        this.feedbacks =\n            await CafesComponent.methods.getFeedbacks(this.cafe.id)\n\n      this.show = !this.show\n      return this.show\n    },\n\n    saveFeedback: async function () {\n      this.feedbacks.push({text: this.f})\n      this.feedbackCount++\n      this.success_show = true\n      await CafesComponent.methods.saveFeedback({text: this.f, id_cafe: this.cafe.id})\n      this.f = ''\n\n      setTimeout(() => this.success_show = false, 5000)\n    },\n\n  }\n}\n\n</script>\n\n<template>\n\n  <div class=\"tc-cafe\" v-show=\"cafe.show\">\n    <div class=\"tc-cafe-title\" @click.prevent=\"toggle\">\n      {{ cafe.name }}\n    </div>\n    <div class=\"tc-cafe-body\" @click.prevent=\"toggle\">\n      Отзывов: {{ this.feedbackCount }}\n    </div>\n    <img class=\"tc-cafe-image\" @click.prevent=\"toggle\" v-bind:src=\"cafe.photo\" v-show=\"true\" alt=\"\"/>\n    <div class=\"tc-cafe-modal\" v-show=\"show&&cafe.show\">\n      <div>\n        <div v-show=\"cafe.address\">Адрес: {{ cafe.address }}</div>\n        <div v-show=\"cafe.landmark\">Ориентиры: {{ cafe.landmark }}</div>\n        <div v-show=\"cafe.cuisine\">Кухня: {{ cafe.cuisine }}</div>\n        <div v-show=\"cafe.distance\">Расстояние: {{ cafe.distance }}м.</div>\n        <div v-show=\"cafe.time\">Время в пути: {{ cafe.time }} мин.</div>\n        <!--        <div v-show=\"cafe.hasOwnProperty('business_lunch')\"> Бизнес-ланч: {{ business_lunch ? 'Да' : 'Нет' }}</div>-->\n        <div v-show=\"cafe.price\">Ср.чек: {{ cafe.price }} руб.</div>\n        <p/>\n        <div class=\"tc-feedbacks\">\n\n          <li v-for=\"n in feedbacks\" v-bind:key=\"n\">{{ n.text }}</li>\n\n        </div>\n        <div>\n          <p></p>\n          Оставить отзыв\n        </div>\n        <div class=\"tc-cafe-input\">\n              <textarea v-model=\"f\" @click.prevent=\"\">\n                </textarea>\n            <transition name=\"slide-fade\" >\n              <div class=\"success-message\" v-if=\"success_show\">\n              Спасибо! Ваш отзыв сохранён\n              </div>\n            </transition>\n          <div/>\n          <button class=\"tc-cafe-btn\" type=submit @click=\"saveFeedback\">Сохранить</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <hr class=\"hr\">\n\n\n</template>\n\n<style lang=\"scss\" scoped>\n\n.tc-cafe {\n  font-size: 16px;\n\n  background-color: darkseagreen;\n  margin: 10px 10% 10px 10%;\n  border-radius: 8px;\n  width: percentage(0.8);\n  text-align: center;\n\n  .tc-cafe-image {\n    cursor: pointer;\n\n    width: percentage(0.8);\n    margin-bottom: 10px;\n\n  }\n}\n\n.tc-cafe-modal {\n  text-align: left;\n  margin-left: 10%;\n}\n\n.hr {\n  border: 0;\n}\n\n.tc-cafe-btn {\n  font-size: 16px;\n  margin-bottom: 10px;\n}\n\n.tc-cafe-input {\n  font-size: 16px\n\n}\n\n.success-message {\n  font-size: 24px;\n  opacity: 0.7;\n\n  .slide-fade-enter-active {\n    transition: all .3s ease;\n  }\n\n  .slide-fade-leave-active {\n    transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n  }\n\n  .slide-fade-enter, .slide-fade-leave-to\n    /* .slide-fade-leave-active до версии 2.1.8 */\n  {\n    transform: translateX(10px);\n    opacity: 0;\n  }\n}\n\n</style>"],"mappings":";AAEA,OAAOA,cAAa,MAAO,iCAAiC;AAE5D,eAAe;EACbC,IAAI,EAAE,eAAe;EAErBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,KAAK;MACXC,YAAY,EAAE,KAAK;MACnBC,CAAC,EAAE,EAAE;MACLC,SAAS,EAAE,EAAE;MACbC,aAAa,EAAE;IAEjB;EACF,CAAC;EAEDC,KAAK,EAAE;IACL,MAAM,EAAE;MACNC,QAAQ,EAAE,IAAI;MACdC,IAAI,EAAEC;IACR;EACF,CAAC;EAEDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACL,aAAY,GAAI,IAAI,CAACM,IAAI,CAACC,cAAa;IAE5C,SAASC,gBAAgBA,CAACC,WAAW,EAAE;MACrC,IAAIA,WAAW,CAACC,QAAQ,EAAE;QACxB,IAAIC,CAAA,GAAIF,WAAW,CAACC,QAAQ,CAAC,CAAC;QAC9BC,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC;QAChBD,CAAC,CAACE,MAAM,CAAC,CAAC;MACZ;IACF;EACF,CAAC;EAEDC,OAAO,EAAE;IAEPC,MAAM,EAAE,eAAAA,CAAA,EAAkB;MACxB,IAAI,CAAC,IAAI,CAACnB,IAAI,EACZ,IAAI,CAACG,SAAQ,GACT,MAAMN,cAAc,CAACqB,OAAO,CAACE,YAAY,CAAC,IAAI,CAACV,IAAI,CAACW,EAAE;MAE5D,IAAI,CAACrB,IAAG,GAAI,CAAC,IAAI,CAACA,IAAG;MACrB,OAAO,IAAI,CAACA,IAAG;IACjB,CAAC;IAEDsB,YAAY,EAAE,eAAAA,CAAA,EAAkB;MAC9B,IAAI,CAACnB,SAAS,CAACoB,IAAI,CAAC;QAACC,IAAI,EAAE,IAAI,CAACtB;MAAC,CAAC;MAClC,IAAI,CAACE,aAAa,EAAC;MACnB,IAAI,CAACH,YAAW,GAAI,IAAG;MACvB,MAAMJ,cAAc,CAACqB,OAAO,CAACI,YAAY,CAAC;QAACE,IAAI,EAAE,IAAI,CAACtB,CAAC;QAAEuB,OAAO,EAAE,IAAI,CAACf,IAAI,CAACW;MAAE,CAAC;MAC/E,IAAI,CAACnB,CAAA,GAAI,EAAC;MAEVwB,UAAU,CAAC,MAAM,IAAI,CAACzB,YAAW,GAAI,KAAK,EAAE,IAAI;IAClD;EAEF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}